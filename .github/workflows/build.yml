name: Build

on:
  workflow_call:
    secrets:
      CACHIX_AUTH_TOKEN:
        required: false

jobs:
  build:
    strategy:
      fail-fast: false
      matrix:
        package:
          - faf-client
          - faf-client-unstable
          - proton-ge
          - northstar-proton
          - wine-ge
          - wine-osu
          - wine-tkg
          - wine-discord-ipc-bridge
          - winestreamproxy
          - osu-stable
          - osu-lazer-bin
          - rocket-league
          - star-citizen
          - technic-launcher
          - viper

    uses: ./.github/workflows/nix.yml
    with:
      command: nix build -L .#${{ matrix.package }}
    secrets: inherit
